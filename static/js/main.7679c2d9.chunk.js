(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{127:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(30),a=n(2),c={messagesData:[{id:1,msg:"\u041f\u0440\u0438\u0432\u0435\u0442"},{id:2,msg:"\u0422\u0435\u0441\u0442\u043e\u0432\u044b\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f"},{id:3,msg:"\u041d\u0430\u043f\u0438\u0448\u0438 \u0447\u0442\u043e \u043d\u0438\u0431\u0443\u0434\u044c \u0432 \u0447\u0430\u0442"},{id:4,msg:"\u041b\u043e\u0440\u0435\u043c \u0438\u043f\u0443\u0441\u043c"}],dialogsData:[{id:1,name:"\u0415\u0432\u0433\u0435\u043d\u0438\u0439"},{id:2,name:"\u0414\u043c\u0438\u0442\u0440\u0438\u0439"},{id:3,name:"\u0412\u0430\u043b\u0435\u0440\u0430"},{id:4,name:"\u0421\u0432\u0435\u0442\u043b\u0430\u043d\u0430"},{id:5,name:"\u041d\u0430\u0441\u0442\u044f"}],fake:0},s=function(t){return{type:"ADD-COMMENT",currentMsg:t}};e.b=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ADD-COMMENT":return Object(a.a)(Object(a.a)({},t),{},{messagesData:[].concat(Object(r.a)(t.messagesData),[{id:5,msg:e.currentMsg}])});case"FAKE":return Object(a.a)(Object(a.a)({},t),{},{fake:e.fake});default:return t}}},128:function(t,e,n){"use strict";n.d(e,"l",(function(){return l})),n.d(e,"g",(function(){return j})),n.d(e,"e",(function(){return b})),n.d(e,"h",(function(){return d})),n.d(e,"f",(function(){return p})),n.d(e,"c",(function(){return O})),n.d(e,"j",(function(){return h})),n.d(e,"i",(function(){return m})),n.d(e,"b",(function(){return g})),n.d(e,"d",(function(){return _})),n.d(e,"a",(function(){return x})),n.d(e,"k",(function(){return v}));var r=n(4),a=n.n(r),c=n(11),s=n(30),u=n(2),o=n(9),i={users:[],currentPageUsers:[],totalCount:10,usersPerPage:100,amountOfPages:[1],currentPage:1,showLoader:!1,followingInProgressID:null,visiblePages:[]},l=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"FOLLOW":return Object(u.a)(Object(u.a)({},t),{},{users:t.users.map((function(t){return t.id===e.userId?Object(u.a)(Object(u.a)({},t),{},{followed:!0}):t}))});case"UNFOLLOW":return Object(u.a)(Object(u.a)({},t),{},{users:t.users.map((function(t){return t.id===e.userId?Object(u.a)(Object(u.a)({},t),{},{followed:!1}):t}))});case"FOLLOWING_IN_PROGRESS":return Object(u.a)(Object(u.a)({},t),{},{followingInProgressID:e.followingInProgressID});case"SET_USERS":return Object(u.a)(Object(u.a)({},t),{},{users:Object(s.a)(e.users)});case"SET_CURRENT_PAGE_USERS":return Object(u.a)(Object(u.a)({},t),{},{currentPageUsers:Object(s.a)(e.currentPageUsers)});case"SET_USERS_AMOUNT":return Object(u.a)(Object(u.a)({},t),{},{totalCount:e.totalCount});case"SET_PAGES_AMOUNT":for(var n=[],r=1;r<e.amountOfPages+1;r++)n.push(r);return Object(u.a)(Object(u.a)({},t),{},{amountOfPages:n});case"SET_CURRENT_PAGE":return Object(u.a)(Object(u.a)({},t),{},{currentPage:e.currentPage});case"SHOULD_SHOW_LOADER":return Object(u.a)(Object(u.a)({},t),{},{showLoader:e.shouldShowLoader});case"SET_VISIBLE_PAGES":return Object(u.a)(Object(u.a)({},t),{},{visiblePages:e.visiblePages});default:return t}},f=function(t){return{type:"FOLLOWING_IN_PROGRESS",followingInProgressID:t}},j=function(t){return{type:"SET_USERS",users:t}},b=function(t){return{type:"SET_CURRENT_PAGE_USERS",currentPageUsers:t}},d=function(t){return{type:"SET_USERS_AMOUNT",totalCount:t}},p=function(t){return{type:"SET_PAGES_AMOUNT",amountOfPages:t}},O=function(t){return{type:"SET_CURRENT_PAGE",currentPage:t}},h=function(t){return{type:"SHOULD_SHOW_LOADER",shouldShowLoader:t}},m=function(t){return{type:"SET_VISIBLE_PAGES",visiblePages:t}},g=function(){return function(){var t=Object(c.a)(a.a.mark((function t(e){var n,r,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(h(!0)),t.next=3,o.c.getUsers();case 3:n=t.sent,e(j(n.items)),e(d(n.totalCount)),100,r=n.totalCount,c=Math.ceil(r/100),e(p(c)),e(h(!1));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},_=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(){var e=Object(c.a)(a.a.mark((function e(n){var r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(h(!0)),r=1==!isNaN(t)?t:1,n(O(r)),e.next=5,o.c.getUsers(r);case 5:c=e.sent,n(b(c.items)),n(h(!1));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},x=function(t){return function(){var e=Object(c.a)(a.a.mark((function e(n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(f(!0)),e.next=3,o.c.follow(t);case 3:0===e.sent.resultCode&&n({type:"FOLLOW",userId:t}),n(f(!1));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},v=function(t){return function(){var e=Object(c.a)(a.a.mark((function e(n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.c.unFollow(t);case 2:0===e.sent.resultCode&&n({type:"UNFOLLOW",userId:t});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},132:function(t,e,n){t.exports={Post:"Post_Post__xdvZS"}},134:function(t,e,n){t.exports={formSummaryError:"Login_formSummaryError__1f3pw"}},174:function(t,e,n){},175:function(t,e,n){},25:function(t,e,n){t.exports={content__avatar:"ProfileInfo_content__avatar__2DjM0",content__author:"ProfileInfo_content__author__1_D9R",content:"ProfileInfo_content__1hAH4",content__header:"ProfileInfo_content__header__60Cv9",socialLinksEditor:"ProfileInfo_socialLinksEditor__2HmiY",inputFileWrapper:"ProfileInfo_inputFileWrapper__2t_d4",inputFile:"ProfileInfo_inputFile__Ag3rx",inputSpan:"ProfileInfo_inputSpan__32wxK",editingField:"ProfileInfo_editingField__1tUDs"}},31:function(t,e,n){t.exports={socialLinks:"Socials_socialLinks__xgR6B",socials:"Socials_socials__a9ueH"}},338:function(t,e,n){"use strict";n.r(e);var r=n(1),a=n.n(r),c=n(60),s=n.n(c),u=(n(174),n(20)),o=n(21),i=n(23),l=n(22),f=(n(175),n(5)),j=n(7),b=n(8),d=n(32),p=n(0),O=function(t){return Object(p.jsx)("h3",{children:t.fio})},h=n(64),m=n.n(h),g=function(t){var e=t.friends.map((function(t){return Object(p.jsx)(O,{fio:t.fio},t.id)})),n=t.links.map((function(t){return Object(p.jsx)("div",{className:m.a.nav__link,children:Object(p.jsx)(d.b,{to:t.src,activeClassName:m.a.active_link,children:t.name})})}));return Object(p.jsxs)("nav",{className:m.a.nav,children:[Object(p.jsx)("div",{children:n}),Object(p.jsx)("div",{children:e})]})},_=Object(j.connect)((function(t){return{friends:Object(b.l)(t),links:Object(b.m)(t)}}),(function(t){return{}}))(g),x=n(2),v=n(29),S=n(25),T=n.n(S),I=n(92),y=function(t){var e=Object(r.useState)(!1),n=Object(v.a)(e,2),a=n[0],c=n[1],s=Object(r.useState)(t.status),u=Object(v.a)(s,2),o=u[0],i=u[1];Object(r.useEffect)((function(){i(t.status)}),[t.status]);return Object(p.jsx)("div",{children:a?Object(p.jsx)("div",{children:t.isOwner?Object(p.jsx)("input",{onChange:function(t){i(t.target.value)},onBlur:function(){t.updateStatus(o),c(!1)},value:o}):Object(p.jsx)("span",{children:o})}):Object(p.jsx)("div",{children:t.isOwner?Object(p.jsx)("span",{onDoubleClick:function(){c(!0)},children:o}):Object(p.jsx)("span",{children:o})})})},P=n(65),E=n.n(P),k=function(t){var e=Object(r.useState)(Object(x.a)({},t.socials)),n=Object(v.a)(e,2),a=n[0],c=n[1],s=function(t,e){var n=t.target.value;a[e]=n,c(Object(x.a)({},a))};return Object(p.jsx)("div",{onClick:function(t){return t.stopPropagation()},className:E.a.editZone,children:Object(p.jsxs)("div",{className:E.a.editWrapper,children:[Object(p.jsxs)("div",{className:E.a.names,children:[Object(p.jsx)("span",{children:"Facebook:"}),Object(p.jsx)("span",{children:"Github:"}),Object(p.jsx)("span",{children:"Instagram:"}),Object(p.jsx)("span",{children:"Twitter:"}),Object(p.jsx)("span",{children:"Vk:"}),Object(p.jsx)("span",{children:"Youtube:"})]}),Object(p.jsx)("div",{children:Object(p.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t.setSocialsTK(a,t.myID)},action:"",children:[Object(p.jsx)("input",{onChange:function(t){return s(t,"facebook")},type:"text",value:a.facebook}),Object(p.jsx)("br",{}),Object(p.jsx)("input",{onChange:function(t){return s(t,"github")},type:"text",value:a.github}),Object(p.jsx)("br",{}),Object(p.jsx)("input",{onChange:function(t){return s(t,"instagram")},type:"text",value:a.instagram}),Object(p.jsx)("br",{}),Object(p.jsx)("input",{onChange:function(t){return s(t,"twitter")},type:"text",value:a.twitter}),Object(p.jsx)("br",{}),Object(p.jsx)("input",{onChange:function(t){return s(t,"vk")},type:"text",value:a.vk}),Object(p.jsx)("br",{}),Object(p.jsx)("input",{onChange:function(t){return s(t,"youtube")},type:"text",value:a.youtube}),Object(p.jsx)("br",{}),Object(p.jsx)("input",{type:"submit",value:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c"})]})})]})})},w=n(31),A=n.n(w),D=n.p+"static/media/fb-logo.e0f038e6.png",N=n.p+"static/media/gh-logo.81533a6b.png",U=n.p+"static/media/inst-logo.6bab0584.png",C=n.p+"static/media/tw-logo.b8bce711.png",L=n.p+"static/media/vk-logo.9546b69b.png",M=n.p+"static/media/yt-logo.3e675bd3.png",R=function(t){return Object(p.jsxs)("div",{className:A.a.socialLinks,children:[t.facebook&&Object(p.jsx)("div",{className:A.a.socials,children:Object(p.jsx)("a",{href:t.facebook,target:"_blank",children:Object(p.jsx)("img",{src:D,alt:"socials"})})}),t.github&&Object(p.jsx)("div",{className:A.a.socials,children:Object(p.jsx)("a",{href:t.github,target:"_blank",children:Object(p.jsx)("img",{src:N,alt:"socials"})})}),t.instagram&&Object(p.jsx)("div",{className:A.a.socials,children:Object(p.jsx)("a",{href:t.instagram,target:"_blank",children:Object(p.jsx)("img",{src:U,alt:"socials"})})}),t.twitter&&Object(p.jsx)("div",{className:A.a.socials,children:Object(p.jsx)("a",{href:t.twitter,target:"_blank",children:Object(p.jsx)("img",{src:C,alt:"socials"})})}),t.vk&&Object(p.jsx)("div",{className:A.a.socials,children:Object(p.jsx)("a",{href:t.vk,target:"_blank",children:Object(p.jsx)("img",{src:L,alt:"socials"})})}),t.youtube&&Object(p.jsx)("div",{className:A.a.socials,children:Object(p.jsx)("a",{href:t.youtube,target:"_blank",children:Object(p.jsx)("img",{src:M,alt:"socials"})})})]})},F=function(t){var e,n=Object(r.useState)(!1),a=Object(v.a)(n,2),c=a[0],s=a[1],u=Object(r.useState)(Object(x.a)({},t.ProfileInfo.contacts)),o=Object(v.a)(u,2),i=o[0],l=o[1];Object(r.useEffect)((function(){l(Object(x.a)({},t.ProfileInfo.contacts))}),[t.ProfileInfo.contacts]);var f=function(){s(!c)};return Object(p.jsxs)("div",{children:[c&&Object(p.jsx)("div",{onClick:f,className:T.a.editingField,children:Object(p.jsx)(k,{socials:i,myID:t.myID,setSocialsTK:t.setSocialsTK})}),Object(p.jsxs)("div",{className:T.a.content__header,children:[Object(p.jsx)("img",{className:T.a.content__avatar,src:(null===(e=t.ProfileInfo.photos)||void 0===e?void 0:e.small)||I.a}),t.isOwner&&Object(p.jsxs)("div",{className:T.a.inputFileWrapper,children:[Object(p.jsx)("span",{className:T.a.inputSpan,children:"New Photo"}),Object(p.jsx)("input",{className:T.a.inputFile,type:"file",onChange:function(e){e.target.files.length>0&&t.setPhoto(e.target.files[0])}})]}),Object(p.jsxs)("span",{className:T.a.content__author,children:["@",t.ProfileInfo.fullName]}),t.isOwner&&Object(p.jsx)("div",{onClick:f,className:T.a.socialLinksEditor}),Object(p.jsx)(R,Object(x.a)({},i))]}),Object(p.jsxs)("h3",{children:["\u041e\u0431\u043e \u043c\u043d\u0435: ",t.ProfileInfo.aboutMe?t.ProfileInfo.aboutMe:"-"]}),Object(p.jsx)(y,{status:t.status,updateStatus:t.updateStatusTK,getStatus:t.getStatusTK,isOwner:t.isOwner})]})},G=n(66),W=n.n(G),H=n(132),K=n.n(H),J=function(t){return Object(p.jsx)("div",{className:K.a.Post,children:t.msg})},Y=n(41),z=n.n(Y),B=n(62),X=n.n(B),Z=n(40),V=n(46),Q=a.a.memo((function(t){console.log("RENDER MY POSTS");var e=t.state.map((function(t){return Object(p.jsx)(J,{msg:t.msg})}));return Object(p.jsxs)("div",{className:W.a.MyPosts,children:[Object(p.jsx)("div",{className:W.a.content__add_post,children:Object(p.jsx)("h3",{children:"ADD POST"})}),Object(p.jsxs)("div",{className:W.a.content__wall,children:["WALL",Object(p.jsx)($,{onSubmit:function(e){t.addPost(e.textareaData)}}),e]})]})})),q=Object(Z.a)(10),$=X()({form:"postInput",fields:["textareaData","userPhoto"]})((function(t){return Object(p.jsxs)("form",{onSubmit:t.handleSubmit,children:[Object(p.jsx)(z.a,{type:"text",validate:[Z.b,q],component:V.b,name:"textareaData",placeholder:"test"}),Object(p.jsx)("br",{}),Object(p.jsx)("input",{type:"submit",placeholder:"LOGIN"})]})})),tt=Q,et=n(4),nt=n.n(et),rt=n(11),at=n(30),ct=n(9),st={profileInfo:{contacts:{}},status:"",currentUserId:null,postsData:[{id:1,likesCount:34,msg:"\u041f\u0420\u0418\u0412\u0415\u0422"},{id:2,likesCount:63,msg:"\u0442\u0435\u0441\u0442\u043e\u0432\u044b\u0439 \u043f\u043e\u0441\u0442 2"},{id:3,likesCount:27,msg:"Yo"},{id:4,likesCount:12,msg:"\u043f\u043e\u0441\u0442 4"}]},ut=function(t){return{type:"SET_SOCIALS",contacts:t}},ot=function(t){return{type:"SET_PROFILE_INFO",profileInfo:t}},it=function(t){return{type:"SET_STATUS",status:t||"\u0421\u0442\u0430\u0442\u0443\u0441 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442"}},lt=function(t){return function(){var e=Object(rt.a)(nt.a.mark((function e(n){var r;return nt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ct.b.getStatus(t);case 2:r=e.sent,n(it(r.data));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ft=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ADD-POST":return Object(x.a)(Object(x.a)({},t),{},{currentInputData:"",postsData:[].concat(Object(at.a)(t.postsData),[{id:5,msg:e.currentMsg,likesCount:0}])});case"DELETE_POST":var n=t.postsData.filter((function(t,n){return n!=e.postId}));return console.log(n),Object(x.a)(Object(x.a)({},t),{},{postsData:Object(at.a)(n)});case"SET_PROFILE_INFO":return Object(x.a)(Object(x.a)({},t),{},{profileInfo:e.profileInfo});case"SET_SOCIALS":return Object(x.a)(Object(x.a)({},t),{},{profileInfo:Object(x.a)(Object(x.a)({},t.profileInfo),{},{contacts:Object(x.a)({},e.contacts)})});case"SET_CURRENT_USER_ID":return Object(x.a)(Object(x.a)({},t),{},{currentUserId:e.currentUserId});case"SET_STATUS":return Object(x.a)(Object(x.a)({},t),{},{status:e.status});case"SAVE_PHOTO_SUCCESS":return Object(x.a)(Object(x.a)({},t),{},{profileInfo:Object(x.a)(Object(x.a)({},t.profileInfo),{},{photos:e.photos})});default:return t}},jt=Object(j.connect)((function(t){return{state:Object(b.i)(t)}}),(function(t){return{addPost:function(e){return t(function(t){return{type:"ADD-POST",currentMsg:t}}(e))}}}))(tt),bt=n(90),dt=n(28),pt=function(t){Object(i.a)(n,t);var e=Object(l.a)(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(t,e,n){this.props.match.params.USER_ID!=t.match.params.USER_ID&&this.refreshProfile()}},{key:"refreshProfile",value:function(){var t=this.props.match.params.USER_ID||this.props.myID;this.props.profileDidMountThunkCreator(t),this.props.getStatusTK(t)}},{key:"render",value:function(){return!1===this.props.isAuthorised?Object(p.jsx)(f.a,{to:"/login"}):Object(p.jsxs)("div",{children:[Object(p.jsx)(F,Object(x.a)({setSocialsTK:this.props.setSocialsTK,isOwner:!this.props.match.params.USER_ID},this.props)),Object(p.jsx)(jt,{})]})}}]),n}(a.a.Component),Ot=Object(dt.compose)(f.f,Object(j.connect)((function(t){return{ProfileInfo:Object(b.h)(t),status:Object(b.j)(t),myID:t.app.userId}}),{profileDidMountThunkCreator:function(t){return function(){var e=Object(rt.a)(nt.a.mark((function e(n){var r,a,c;return nt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t){e.next=6;break}return e.next=4,ct.a.authMe();case 4:a=e.sent,r=a.data.id;case 6:return e.next=8,ct.b.getProfileInfo(r);case 8:c=e.sent,n(ot(Object(x.a)({},c.data))),lt(r);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},getStatusTK:lt,updateStatusTK:function(t){return function(){var e=Object(rt.a)(nt.a.mark((function e(n){return nt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ct.b.updateStatus(t);case 2:0===e.sent.data.resultCode&&n(it(t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},setPhoto:function(t){return function(){var e=Object(rt.a)(nt.a.mark((function e(n){var r;return nt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ct.b.setImage(t);case 2:0===(r=e.sent).data.resultCode&&n({type:"SAVE_PHOTO_SUCCESS",photos:r.data.data.photos});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},setSocialsTK:function(t,e){return function(){var n=Object(rt.a)(nt.a.mark((function n(r){return nt.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=3,ct.b.setSocials(t,e,st.profileInfo);case 3:0===n.sent.data.messages.length?r(ut(t)):alert("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0435 url \u0430\u0434\u0440\u0435\u0441\u0430!");case 6:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()}}),bt.a)(pt),ht=n(89),mt=n.n(ht),gt=function(t){var e;null===(e=t.props.authData)||void 0===e||e.login;return Object(p.jsxs)("header",{className:mt.a.header,children:[Object(p.jsx)("img",{src:"https://uc20a3d36d20cc7212ef2855648a.previews.dropboxusercontent.com/p/thumb/ABUaDGlLgD6cl4P9ZCFWZ6AOyrHNVKFJxwMpG5RP3YR9iJxX9zail9hNPzi8cFa42tvsdi-9q43ml-NdZzEoZwOWsxhv80ztHS4AeXRi_vax0vavXdTyce-_XhgFA0E1okOsqWVuQePrM7wCB9aLOL6nJZDxSmXcM0cDQ-06AnHI3yFK5kKO4m8lyubMIqYDa75kh7JXUTJyBTzA22hJgB1LktfESvyzC_JX3wNmIKoz8BXgwQcFpENW2LKilb9NWiOs63lt9ZzTz3lr1jXtG1xREhsL8-bNbWXGjak7E-988Sbu_onSUvg8SeCEjlWBYcRwkFb9fOgW3TOS7POXhXkzw8zGvfnW6JZjR3-JrG3G6g/p.jpeg?fv_content=true&size_mode=5",alt:"img"}),!0===t.props.isAuth?Object(p.jsx)("button",{className:mt.a.loginBlock,onClick:function(){t.props.logoutMeTC()},children:"LOGOUT"}):Object(p.jsx)("p",{}),Object(p.jsx)("div",{})]})},_t=n(69),xt={userId:null,email:"",login:"",isFetching:!1,authData:{email:null,id:null,login:null},isAuth:null,authStatus:"You are not authorised"},vt=function(t){return{type:"SET_AUTH_STATUS",authStatus:t}},St=function(t){return{type:"SET_AUTH_USER_DATA",authData:t,isAuth:!0}},Tt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_USER_DATA":return Object(x.a)(Object(x.a)({},t),e.data);case"SET_AUTH_USER_DATA":return Object(x.a)(Object(x.a)({},t),{},{authData:Object(x.a)({},e.authData),isAuth:!0});case"SET_AUTH_STATUS":return"You are succsesfully authorised!"===e.authStatus?Object(x.a)(Object(x.a)({},t),{},{authStatus:e.authStatus,isAuth:!0}):Object(x.a)(Object(x.a)({},t),{},{authStatus:e.authStatus});case"LOGOUT":return{userId:null,email:"",login:"",isFetching:!1,authData:{email:null,id:null,login:null},isAuth:!1,authStatus:"You are not authorised"};default:return t}},It=function(t){Object(i.a)(n,t);var e=Object(l.a)(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.props.authMeThunkCreator()}},{key:"render",value:function(){return Object(p.jsx)(gt,{props:this.props})}}]),n}(a.a.Component),yt=Object(j.connect)((function(t){return{userId:Object(b.o)(t),isAuth:Object(b.g)(t),authData:Object(b.b)(t)}}),{setAuthUserData:St,authMeThunkCreator:function(){return function(){var t=Object(rt.a)(nt.a.mark((function t(e){var n;return nt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ct.a.authMe();case 2:0==(n=t.sent).resultCode&&e(St(n.data));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},logoutMeTC:function(){return function(){var t=Object(rt.a)(nt.a.mark((function t(e){return nt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ct.a.logoutMe();case 2:0===t.sent.resultCode&&e({type:"LOGOUT"});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})(It),Pt=n(134),Et=n.n(Pt),kt=X()({form:"login",fields:["login","password","rememberMe"]})((function(t){return Object(p.jsxs)("form",{onSubmit:t.handleSubmit,children:[Object(p.jsx)(z.a,{type:"text",validate:[Z.b],name:"login",placeholder:"login",component:V.a}),Object(p.jsx)("br",{}),Object(p.jsx)(z.a,{type:"password",validate:[Z.b],name:"password",placeholder:"password",component:V.a}),Object(p.jsx)("br",{}),Object(p.jsx)(z.a,{type:"checkbox",name:"rememberMe",component:"input"})," remember me",Object(p.jsx)("br",{}),t.error?Object(p.jsx)("div",{className:Et.a.formSummaryError,children:t.error}):"",Object(p.jsx)("input",{type:"submit",placeholder:"LOGIN"})]})})),wt=Object(j.connect)((function(t){return{authStatus:Object(b.c)(t),isAuth:Object(b.g)(t)}}),(function(t){return{tryToLoginTC:function(e,n,r){return t(function(t,e,n){return function(){var r=Object(rt.a)(nt.a.mark((function r(a){return nt.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:a(vt("Wait a second...")),setTimeout(Object(rt.a)(nt.a.mark((function r(){var c,s;return nt.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,ct.a.tryToLogin(t,e,n);case 2:0===(c=r.sent).resultCode?(a(vt("You are succsesfully authorised! Redirecting...")),setTimeout((function(){a(vt("You are succsesfully authorised!"))}),1500)):(s=Object(_t.b)("login",{_error:c.messages}),a(s),a(vt("Something went wrong, try again!")));case 4:case"end":return r.stop()}}),r)}))),1e3);case 2:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}()}(e,n,r))}}}))((function(t){return"You are succsesfully authorised!"===t.authStatus||!0===t.isAuth?Object(p.jsx)(f.a,{to:"/profile"}):Object(p.jsxs)("div",{children:[Object(p.jsx)("h1",{children:"Login"}),Object(p.jsx)(kt,{onSubmit:function(e){t.tryToLoginTC(e.login,e.password,e.rememberMe)}}),Object(p.jsx)("h2",{children:t.authStatus})]})})),At=wt,Dt={isUserAuthorised:null,userId:null,userStatus:""},Nt=function(t){return{type:"SET_AUTHORISATION_STATUS",status:t}},Ut=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dt,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:"DEFAULT"};switch(e.type){case"SET_AUTHORISATION_STATUS":return Object(x.a)(Object(x.a)({},t),{},{isUserAuthorised:e.status});case"SET_INITIALISATING_USER_ID":return Object(x.a)(Object(x.a)({},t),{},{userId:e.userId});case"SET_INITIALISATING_USER_STATUS":return Object(x.a)(Object(x.a)({},t),{},{userStatus:e.userStatus});default:return Object(x.a)({},t)}},Ct=function(t){Object(i.a)(n,t);var e=Object(l.a)(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.props.checkUserAuthorisationTC()}},{key:"render",value:function(){return Object(p.jsx)("h1",{children:"\u0417\u0410\u0413\u0420\u0423\u0417\u041a\u0410..."})}}]),n}(a.a.Component),Lt=Object(j.connect)((function(t){return{userId:Object(b.o)(t),userStatus:Object(b.p)(t)}}),{checkUserAuthorisationTC:function(){return function(t){!function(){var e=Object(rt.a)(nt.a.mark((function e(){var n,r,a,c,s;return nt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=0,e.next=3,ct.a.authMe();case 3:return 0===(r=e.sent).resultCode?(n=r.data.id,t({type:"SET_INITIALISATING_USER_ID",userId:r.data.id}),t(St(r.data))):t(Nt(!1)),e.next=7,ct.b.getProfileInfo(n);case 7:return a=e.sent,t(ot(a.data)),e.next=11,ct.b.getStatus(n);case 11:c=e.sent,s=c.data,t(it(s)),t(Nt(!0));case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}}})(Ct),Mt=function(t){return function(e){return Object(p.jsx)(r.Suspense,{fallback:Object(p.jsx)("h2",{children:"Loading..."}),children:Object(p.jsx)(t,Object(x.a)({},e))})}},Rt=a.a.lazy((function(){return n.e(3).then(n.bind(null,343))})),Ft=a.a.lazy((function(){return n.e(5).then(n.bind(null,341))})),Gt=a.a.lazy((function(){return n.e(4).then(n.bind(null,344))})),Wt=function(t){Object(i.a)(n,t);var e=Object(l.a)(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"renderContent",value:function(){return!1===this.props.isUserAuthorised||!0===this.props.isUserAuthorised?Object(p.jsxs)("div",{className:"wrapper",children:[Object(p.jsx)(yt,{}),Object(p.jsx)(_,{}),Object(p.jsxs)("div",{className:"content",children:[Object(p.jsx)(f.b,{path:"/login",render:function(){return Object(p.jsx)(At,{})}}),Object(p.jsx)(f.b,{path:"/dialogs",render:Mt(Rt)}),Object(p.jsx)(f.b,{path:"/news",render:Mt(Ft)}),Object(p.jsx)(f.b,{path:"/profile/:USER_ID?",render:function(){return Object(p.jsx)(Ot,{})}}),Object(p.jsx)(f.b,{path:"/users",render:Mt(Gt)})]})]}):Object(p.jsx)(Lt,{})}},{key:"render",value:function(){return Object(p.jsx)(d.a,{children:Object(p.jsx)("div",{className:"App",children:this.renderContent()})})}}]),n}(a.a.Component),Ht=Object(j.connect)((function(t){return{isUserAuthorised:t.app.isUserAuthorised}}),{})(Wt),Kt=function(t){t&&t instanceof Function&&n.e(6).then(n.bind(null,342)).then((function(e){var n=e.getCLS,r=e.getFID,a=e.getFCP,c=e.getLCP,s=e.getTTFB;n(t),r(t),a(t),c(t),s(t)}))},Jt=n(127),Yt={friends:[],links:[{id:1,src:"/profile",name:"Profile"},{id:1,src:"/dialogs",name:"Messages"},{id:1,src:"/news",name:"News"},{id:1,src:"/music",name:"Music"},{id:1,src:"/settings",name:"Settings"},{id:1,src:"/users",name:"Users"}]},zt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yt;return t},Bt=n(128),Xt=n(129),Zt=n(135),Vt=Object(dt.combineReducers)({profilePage:ft,messagesPage:Jt.b,sidebarPage:zt,users:Bt.l,auth:Tt,app:Ut,form:Xt.a}),Qt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||dt.compose,qt=Object(dt.createStore)(Vt,Qt(Object(dt.applyMiddleware)(Zt.a)));s.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(j.Provider,{store:qt,children:Object(p.jsx)(Ht,{})})}),document.getElementById("root")),Kt()},40:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return a}));var r=function(t){if(!t)return"You must write smth..."},a=function(t){return function(e){if(e&&e.length>t)return"Too long..."}}},46:function(t,e,n){"use strict";n.d(e,"b",(function(){return j})),n.d(e,"a",(function(){return b}));var r=n(2),a=n(68),c=n(67),s=n.n(c),u=n(0),o=["input","meta"],i=["input","meta"],l=["input","meta"],f=function(t){t.input;var e=t.meta,n=Object(a.a)(t,o),r=e.error&&e.touched;return Object(u.jsxs)("div",{className:r?s.a.error_textaera:s.a.textarea,children:[Object(u.jsx)("div",{children:n.children}),r&&Object(u.jsx)("span",{className:s.a.error_span,children:e.error})]})},j=function(t){var e=t.input,n=(t.meta,Object(a.a)(t,i));return Object(u.jsxs)(f,Object(r.a)(Object(r.a)({},t),{},{children:[" ",Object(u.jsx)("textarea",Object(r.a)(Object(r.a)({},e),n))]}))},b=function(t){var e=t.input,n=(t.meta,Object(a.a)(t,l));return Object(u.jsxs)(f,Object(r.a)(Object(r.a)({},t),{},{children:[" ",Object(u.jsx)("input",Object(r.a)(Object(r.a)({},e),n))]}))}},64:function(t,e,n){t.exports={nav:"Navbar_nav__3ePQt",active_link:"Navbar_active_link__1Yo0a"}},65:function(t,e,n){t.exports={editWrapper:"EditSocials_editWrapper__3aDgf",names:"EditSocials_names__2bJH2",editZone:"EditSocials_editZone__3LaGH"}},66:function(t,e,n){t.exports={MyPosts:"MyPosts_MyPosts__1hMTd"}},67:function(t,e,n){t.exports={textarea:"FormControls_textarea__PtU1o",error_textaera:"FormControls_error_textaera__27FU7",error_span:"FormControls_error_span__Tj4Tb"}},8:function(t,e,n){"use strict";n.d(e,"n",(function(){return a})),n.d(e,"r",(function(){return c})),n.d(e,"a",(function(){return s})),n.d(e,"d",(function(){return u})),n.d(e,"e",(function(){return o})),n.d(e,"k",(function(){return i})),n.d(e,"f",(function(){return l})),n.d(e,"s",(function(){return f})),n.d(e,"q",(function(){return j})),n.d(e,"o",(function(){return b})),n.d(e,"p",(function(){return d})),n.d(e,"c",(function(){return p})),n.d(e,"g",(function(){return O})),n.d(e,"b",(function(){return h})),n.d(e,"h",(function(){return m})),n.d(e,"j",(function(){return g})),n.d(e,"i",(function(){return _})),n.d(e,"l",(function(){return x})),n.d(e,"m",(function(){return v}));var r=n(136),a=function(t){return t.users.totalCount},c=function(t){return t.users.usersPerPage},s=function(t){return t.users.amountOfPages},u=function(t){return t.users.currentPage},o=function(t){return t.users.currentPageUsers},i=function(t){return t.users.showLoader},l=function(t){return t.users.followingInProgressID},f=function(t){return t.users.visiblePages},j=Object(r.a)((function(t){return t.users.users}),i,(function(t,e){if(e)return t.filter((function(t){return!0}))})),b=function(t){return t.app.userId},d=function(t){return t.app.userStatus},p=function(t){return t.auth.authStatus},O=function(t){return t.auth.isAuth},h=function(t){return t.auth.authData},m=function(t){return t.profilePage.profileInfo},g=function(t){return t.profilePage.status},_=function(t){return t.profilePage.postsData},x=function(t){return t.sidebarPage.friends},v=function(t){return t.sidebarPage.links}},89:function(t,e,n){t.exports={header:"Header_header__28JW9",loginBlock:"Header_loginBlock__4N43Q"}},9:function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return u})),n.d(e,"c",(function(){return o}));var r=n(2),a=n(133),c=n.n(a).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"7bc29e37-0ad2-4313-9675-44c8bb2d4da5"}}),s={authMe:function(){return c.get("auth/me").then((function(t){return t.data}))},tryToLogin:function(t,e,n){return c.post("auth/login",{email:t,password:e,rememberMe:n}).then((function(t){return t.data}))},logoutMe:function(){return c.delete("auth/login").then((function(t){return t.data}))}},u={getProfileInfo:function(t){return c.get("profile/"+t)},getStatus:function(t){return c.get("profile/status/"+t)},updateStatus:function(t){return c.put("profile/status",{status:t})},setImage:function(t){var e=new FormData;return e.append("image",t),c.put("profile/photo",e,{headers:{"Content-Type":"multipart/form-data"}})},setSocials:function(t,e,n){var a={userId:e,lookingForAJob:n.lookingForAJob||!0,aboutMe:n.aboutMe||"20yo Frontend developer",lookingForAJobDescription:n.lookingForAJobDescription||" - ",fullName:n.fullName||"Test User",contacts:Object(r.a)(Object(r.a)({},t),{},{website:null,mainLink:null})};return c.put("profile",a)}},o={getUsers:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return c.get("users?count=100&page="+t).then((function(t){return t.data}))},follow:function(t){return c.post("follow/"+t).then((function(t){return t.data}))},unFollow:function(t){return c.delete("follow/"+t).then((function(t){return t.data}))}}},90:function(t,e,n){"use strict";var r=n(2),a=n(20),c=n(21),s=n(23),u=n(22),o=n(5),i=n(1),l=n.n(i),f=n(7),j=n(8),b=n(0),d=function(t){return{isAuthorised:Object(j.g)(t)}};e.a=function(t){var e=function(e){Object(s.a)(i,e);var n=Object(u.a)(i);function i(){return Object(a.a)(this,i),n.apply(this,arguments)}return Object(c.a)(i,[{key:"render",value:function(){return this.props.isAuthorised?Object(b.jsx)(t,Object(r.a)({},this.props)):Object(b.jsx)(o.a,{to:"/login"})}}]),i}(l.a.Component);return Object(f.connect)(d)(e)}},92:function(t,e,n){"use strict";e.a=n.p+"static/media/cheems.d58243a6.jpg"}},[[338,1,2]]]);
//# sourceMappingURL=main.7679c2d9.chunk.js.map